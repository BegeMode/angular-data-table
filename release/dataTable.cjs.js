/**
 * angular-data-table - A feature-rich but lightweight ES6 AngularJS Data Table crafted for large data sets!
 * @version v1.0.1
 * @link http://jonshaffer.github.io/angular-data-table/
 * @license MIT
 */
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ResizableDirective(e,t){return{restrict:"A",scope:{isResizable:"=resizable",minWidth:"=",maxWidth:"=",onResize:"&"},link:function(n,o){function i(e){e=e.originalEvent||e;var t=s[0].clientWidth,o=e.movementX||e.mozMovementX||e.screenX-a,i=t+(o||0);a=e.screenX,(!n.minWidth||i>=n.minWidth)&&(!n.maxWidth||i<=n.maxWidth)&&s.css({width:i+"px"})}function r(){n.onResize&&t(function(){var e=s[0].clientWidth;e<n.minWidth&&(e=n.minWidth),n.onResize({width:e})}),e.unbind("mousemove",i),e.unbind("mouseup",r)}n.isResizable&&o.addClass("resizable");var l=angular.element('<span class="dt-resize-handle" title="Resize"></span>'),s=o.parent(),a=void 0;l.on("mousedown",function(t){o[0].classList.contains("resizable")&&(t.stopPropagation(),t.preventDefault(),e.on("mousemove",i),e.on("mouseup",r))}),o.append(l)}}}function SortableDirective(){return{restrict:"A",scope:{isSortable:"=sortable",onSortableSort:"&"},link:function(e,t){function n(e,t){if(e.parentNode===t.parentNode)for(var n=e;n;n=n.previousSibling)if(n===t)return!0;return!1}function o(e){var t=e.target;n(l,t)?t.parentNode.insertBefore(l,t):t.nextSibling&&t.hasAttribute("draggable")&&t.parentNode.insertBefore(l,t.nextSibling.nextSibling)}function i(n){n.preventDefault(),l.classList.remove("dt-clone"),t.off("dragend",i),t.off("dragenter",o),s!==l.nextSibling&&e.onSortableSort({event:n,columnId:angular.element(l).attr("data-id")})}function r(n){e.isSortable&&(n=n.originalEvent||n,l=n.target,s=l.nextSibling,l.classList.add("dt-clone"),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("Text",l.textContent),t.on("dragenter",o),t.on("dragend",i))}var l=void 0,s=void 0;t.on("dragstart",r),e.$on("$destroy",function(){t.off("dragstart",r)})}}}function DraggableRowDirective(e){return{restrict:"A",scope:{isDraggable:"=draggableRow",onDrop:"&"},link:function(t,n){function o(e){if(!e)return null;var t=e;do{if(t.hasAttribute&&t.hasAttribute("draggable"))return t}while(t=t.parentNode);return null}function i(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1}function r(e){u=e.target}function l(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1}function s(a){a.preventDefault(),c.classList.remove("dt-clone"),n.off("dragend",s),n.off("dragover",l),n.off("dragenter",r);var d=e.elementFromPoint(a.clientX,a.clientY);i(n[0],d)||(u=null);var h=o(u),p=+c.getAttribute("rowindex"),f=h?+h.getAttribute("rowindex"):-1;h!==c&&t.onDrop({event:a,indexFrom:p,indexTo:f})}function a(e){t.isDraggable&&(e=e.originalEvent||e,c=e.target,c.classList.add("dt-clone"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",c.textContent),n.on("dragenter",r),n.on("dragover",l),n.on("dragend",s))}var c=void 0,u=void 0;n.on("dragstart",a),t.$on("$destroy",function(){n.off("dragstart",a)})}}}function ObjectId(){return Math.floor((new Date).getTime()/1e3).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return Math.floor(16*Math.random()).toString(16)}).toLowerCase()}function ColumnsByPin(e){for(var t={left:[],center:[],right:[]},n=0,o=e.length;n<o;n+=1){var i=e[n];i.frozenLeft?t.left.push(i):i.frozenRight?t.right.push(i):t.center.push(i)}return t}function ColumnGroupWidths(e,t){return{left:ColumnTotalWidth(e.left),center:ColumnTotalWidth(e.center),right:ColumnTotalWidth(e.right),total:ColumnTotalWidth(t)}}function DeepValueGetter(e,t){if(!e||!t)return e;var n=t.split("."),o=e;if(n.length)for(var i=0,r=n.length;i<r;i+=1)o=o[n[i]];return o}function CamelCase(e){return e=e.replace(/[^a-zA-Z0-9 ]/g," "),e=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),e=e.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase(),e=e.replace(/([ 0-9]+)([a-zA-Z])/g,function(e,t,n){return t.trim()+n.toUpperCase()})}function ScrollbarWidth(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var o=n.offsetWidth;return e.parentNode.removeChild(e),t-o}function NextSortDirection(e,t){return"single"===e?"asc"===t?"desc":"asc":t?"asc"===t?"desc":void 0:"asc"}function isOldAngular(){return 1===angular.version.major&&angular.version.minor<5}function ColumnTotalWidth(e,t){var n=0;return e.forEach(function(e){var o=t&&e[t];n+=o?e[t]:e.width}),n}function GetTotalFlexGrow(e){var t=0;return e.forEach(function(e){t+=e.flexGrow||0}),t}function AdjustColumnWidths(e,t){var n=ColumnTotalWidth(e),o=GetTotalFlexGrow(e),i=ColumnsByPin(e);n!==t&&ScaleColumns(i,t,o)}function ScaleColumns(e,t,n){function o(e,t){e.forEach(function(e,n){if(e.canAutoResize&&!i[n]){var o=e.width+e.flexGrow*t;angular.isDefined(e.minWidth)&&o<e.minWidth?(r+=o-e.minWidth,e.width=e.minWidth,i[n]=!0):e.width=o}})}angular.forEach(e,function(e){e.forEach(function(e){e.canAutoResize?e.width=0:(t-=e.width,n-=e.flexGrow)})});var i={},r=t;do{!function(){var t=r/n;r=0,angular.forEach(e,function(e){o(e,t)})}()}while(0!==r)}function ForceFillColumnWidths(e,t,n){var o=0,i=n>-1?e.slice(n,e.length).filter(function(e){return e.canAutoResize}):e.filter(function(e){return e.canAutoResize});e.forEach(function(e){e.canAutoResize?o+=e.$$oldWidth||e.width:o+=e.width});var r=t-o,l=r/i.length,s=o>t;i.forEach(function(e){if(s)e.width=e.$$oldWidth||e.width;else{e.$$oldWidth||(e.$$oldWidth=e.width);var t=e.$$oldWidth+l;e.minWith&&t<e.minWidth?e.width=e.minWidth:e.maxWidth&&t>e.maxWidth?e.width=e.maxWidth:e.width=t}})}function throttle(e,t,n){var o=this;return function(){for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];var s=n||(n={}),a=void 0,c=null,u=0,d=function(){u=!1===s.leading?0:new Date,c=null,a=e.apply(o,r)},h=new Date;u||!1!==s.leading||(u=h);var p=t-(h-u);return p<=0?(clearTimeout(c),c=null,u=h,a=e.apply(o,r)):c||!1===s.trailing||(c=setTimeout(d,p)),a}}function DataTableDirective(e,t,n){return{restrict:"E",replace:!0,controller:DataTableController,scope:!0,bindToController:{options:"=",rows:"=",selected:"=?",expanded:"=?",onSelect:"&",onSort:"&",onFiltered:"&",onTreeToggle:"&",onPage:"&",onRowClick:"&",onRowDblClick:"&",onColumnResize:"&",onTreeLoader:"&",onMoveRow:"&"},controllerAs:"dt",template:function(e){var t=e[0].getElementsByTagName("column"),n=ObjectId();return DataTableService.saveColumns(n,t),'<div class="dt" ng-class="dt.tableCss()" ng-style="dt.tableStyles()" data-column-id="'+n+'">\n          <dt-header options="dt.options"\n                     columns="dt.columnsByPin"\n                     column-widths="dt.columnWidths"\n                     ng-if="dt.options.headerHeight"\n                     on-resize="dt.onResized(column, width)"\n                     selected-rows="dt.selected"\n                     all-rows="dt.rows"\n                     on-sort="dt.onSorted()">\n          </dt-header>\n          <dt-body rows="dt.rows"\n                   selected="dt.selected"\n                   expanded="dt.expanded"\n                   columns="dt.columnsByPin"\n                   on-select="dt.onSelected(rows)"\n                   on-row-click="dt.onRowClicked(row)"\n                   on-row-dbl-click="dt.onRowDblClicked(row)"\n                   column-widths="dt.columnWidths"\n                   options="dt.options"\n                   on-page="dt.onBodyPage(offset, size)"\n                   on-tree-toggle="dt.onTreeToggled(row, cell)"\n                   on-tree-loader="dt.onTreeLoad(row, cell)"   \n                   on-rows-filtered="dt.onRowsFiltered(rows)"   \n                   on-move-row="dt.moveRow(rowFrom, rowTo)">   \n          </dt-body>\n          <dt-footer ng-if="dt.options.footerHeight || dt.options.paging.mode"\n                     ng-style="{ height: dt.options.footerHeight + \'px\' }"\n                     on-page="dt.onFooterPage(offset, size)"\n                     paging="dt.options.paging" total-text="dt.options.totalString">\n           </dt-footer>\n        </div>'},compile:function(){return{pre:function(o,i,r,l){function s(){var e=i[0].getBoundingClientRect();if(l.options.internal.innerWidth=Math.floor(e.width),l.options.scrollbarV){var t=e.height;l.options.headerHeight&&(t-=l.options.headerHeight),l.options.footerHeight&&(t-=l.options.footerHeight),l.options.internal.bodyHeight=t,l.calculatePageSize()}l.adjustColumns()}function a(){throttle(function(){t(s)})}DataTableService.buildColumns(o,n);var c=i.attr("data-column-id"),u=DataTableService.columns[c];u&&(l.options.columns=u),l.inheritColumnSortableProps(),l.transposeColumnDefaults(),l.options.internal.scrollBarWidth=ScrollbarWidth(),e.addEventListener("resize",a);var d=function(){var e=i.find("dt-body");i[0].offsetHeight-e[0].offsetHeight>100&&s()};!function e(){var n=i[0].getBoundingClientRect();n.width&&n.height?(s(),t(d,500)):t(e,100)}(),i.addClass("dt-loaded"),o.$on("$destroy",function(){angular.element(e).off("resize")})}}}}}function GetVendorPrefixedName(e){var t=CamelCase(e);return cache[t]||(angular.isDefined(testStyle[prefix.css+e])?cache[t]=prefix.css+e:angular.isDefined(testStyle[e])&&(cache[t]=e)),cache[t]}function TranslateXY(e,t,n){hasCSSTransforms?!isSafari&&hasCSS3DTransforms?(e[transform]="translate3d("+t+"px, "+n+"px, 0)",e[backfaceVisibility]="hidden"):e[CamelCase(transform)]="translate("+t+"px, "+n+"px)":(e.top=n+"px",e.left=t+"px")}function HeaderDirective(e){return{restrict:"E",controller:HeaderController,controllerAs:"header",scope:!0,bindToController:{options:"=",columns:"=",columnWidths:"=",selectedRows:"=?",allRows:"=",onSort:"&",onFiltered:"&",onReordered:"&",onResize:"&"},template:'\n      <div class="dt-header" ng-style="header.styles()">\n        <div class="dt-header-inner" ng-style="header.innerStyles()">\n          <div class="dt-row-left"\n               ng-style="header.stylesByGroup(\'left\')"\n               ng-if="header.columns[\'left\'].length"\n               sortable="header.options.reorderable"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'left\'] track by column.$id"\n              on-sort="header.onSorted(column, modifierPressed)"\n              on-filter="header.onFilter(column, filterKeywords)"\n              options="header.options"\n              sort-type="header.options.sortType"\n              on-resize="header.onResized(column, width)"\n              all-rows="header.allRows"\n              column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-center"\n               sortable="header.options.reorderable"\n               ng-style="header.stylesByGroup(\'center\')"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'center\'] track by column.$id"\n              on-checkbox-change="header.onCheckboxChanged()"\n              on-sort="header.onSorted(column, modifierPressed)"\n              on-filter="header.onFilter(column, filterKeywords)"\n              sort-type="header.options.sortType"\n              selected="header.isSelected()"\n              on-resize="header.onResized(column, width)"\n              options="header.options"\n              column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-right"\n               ng-if="header.columns[\'right\'].length"\n               sortable="header.options.reorderable"\n               ng-style="header.stylesByGroup(\'right\')"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'right\'] track by column.$id"\n              on-checkbox-change="header.onCheckboxChanged()"\n              on-sort="header.onSorted(column, modifierPressed)"\n              on-filter="header.onFilter(column, filterKeywords)"\n              sort-type="header.options.sortType"\n              selected="header.isSelected()"\n              on-resize="header.onResized(column, width)"\n              options="header.options"\n              column="column">\n            </dt-header-cell>\n          </div>\n        </div>\n      </div>',replace:!0,link:function(t,n,o,i){t.columnsResorted=function(t,n){var o=r(n),l=angular.element(t.currentTarget),s=-1;angular.forEach(l.children(),function(e,t){n===angular.element(e).attr("data-id")&&(s=t)}),e(function(){angular.forEach(i.columns,function(e){if(e.indexOf(o)>-1){var t=e[s],n=i.options.columns.indexOf(t),r=i.options.columns.indexOf(o);return i.options.columns.splice(r,1),i.options.columns.splice(n,0,o),!1}}),i.onReordered()})};var r=function(e){return i.columns.left.concat(i.columns.center).concat(i.columns.right).find(function(t){return t.$id===e})}}}}function HeaderCellDirective(e){return{restrict:"E",controller:HeaderCellController,controllerAs:"hcell",scope:!0,bindToController:{options:"=",column:"=",onSort:"&",onFilter:"&",sortType:"=",onResize:"&",selected:"="},replace:!0,template:'<div ng-class="hcell.cellClass()"\n            class="dt-header-cell"\n            draggable="true"\n            data-id="{{column.$id}}"\n            ng-style="hcell.styles()"\n            style="height:100%;"\n            title="{{::hcell.column.name}}">\n        <div resizable="hcell.column.resizable"\n             on-resize="hcell.onResized(width, hcell.column)"\n             min-width="hcell.column.minWidth"\n             max-width="hcell.column.maxWidth">\n          <label ng-if="hcell.column.isCheckboxColumn && hcell.column.headerCheckbox" class="dt-checkbox">\n            <input type="checkbox"\n                   ng-model="hcell.column.allRowsSelected"\n                   ng-change="hcell.checkboxChangeCallback()" />\n          </label>\n          <span class="dt-header-cell-label"\n                ng-click="hcell.onSorted($event)">\n          </span>\n          <span ng-class="hcell.sortClass()">{{hcell.column.sortPriority}}</span>\n          <div ng-if="hcell.column.filter">\n            <input type="{{hcell.column.filter}}" ng-model-options="{ debounce: 500 }" placeholder="{{hcell.options.filterPlaceholder + \' \' + hcell.column.name}}" ng-click="hcell.onFilterClick($event)" ng-model="hcell.column.filterKeywords" style="width:99%;"/>\n          </div>\n        </div>\n      </div>',compile:function(){return{pre:function(t,n,o,i){var r=n[0].querySelector(".dt-header-cell-label"),l=void 0;if((i.column.headerTemplate||i.column.headerRenderer||i.column.headerFilterTemplate)&&(l=i.options.$outer.$new(!1),l.$header=i.column.name,l.$index=t.$index),i.column.headerTemplate){var s="<span>"+i.column.headerTemplate.trim()+"</span>",a=angular.element(s);angular.element(r).append(e(a)(l))}else if(i.column.headerRenderer){var c=i.column.headerRenderer(n),u=angular.element(c);angular.element(r).append(e(u)(l)[0])}else{var d=i.column.name;(angular.isUndefined(d)||null===d)&&(d=""),r.textContent=d}}}}}}function BodyDirective(){return{restrict:"E",controller:BodyController,controllerAs:"body",bindToController:{columns:"=",columnWidths:"=",rows:"=",options:"=",selected:"=?",checked:"=?",expanded:"=?",onPage:"&",onTreeToggle:"&",onTreeLoader:"&",onRowsFiltered:"&",onSelect:"&",onRowClick:"&",onRowDblClick:"&",onMoveRow:"&"},scope:!0,template:'\n      <div\n        class="progress-linear"\n        role="progressbar"\n        ng-show="body.options.loadingIndicator">\n        <div class="container">\n          <div class="bar"></div>\n        </div>\n      </div>\n      <div class="dt-body" ng-style="body.styles()" dt-selection \n               draggable-row="body.options.rowDraggable"\n               on-drop="body.onDropRow(event, indexFrom, indexTo)">\n        <dt-scroller class="dt-body-scroller">\n          <dt-group-row ng-repeat-start="r in body.tempRows track by $index"\n                        ng-if="r.group"\n                        ng-style="body.groupRowStyles(r)"\n                        options="body.options"\n                        on-group-toggle="body.onGroupToggle(group)"\n                        expanded="body.getRowExpanded(r)"\n                        loading="body.getRowLoading(r)"\n                        tabindex="{{$index}}"\n                        row="r">\n          </dt-group-row>\n          <dt-row ng-repeat-end\n                  ng-if="!r.group"\n                  row="body.getRowValue($index)"\n                  tabindex="{{$index}}"\n                  rowindex="{{r.$$index}}"\n                  columns="body.columns"\n                  column-widths="body.columnWidths"\n                  ng-keydown="selCtrl.keyDown($event, $index, r)"\n                  ng-click="selCtrl.rowClicked($event, r.$$index, r)"\n                  ng-dblclick="selCtrl.rowDblClicked($event, r.$$index, r)"\n                  on-tree-toggle="body.onTreeToggled(row, cell)"\n                  ng-class="body.rowClasses(r)"\n                  options="body.options"\n                  selected="body.isSelected(r)"\n                  checked="selCtrl.isChecked(r)"\n                  on-checkbox-change="selCtrl.onCheckboxChange($event, $index, row)"\n                  columns="body.columnsByPin"\n                  has-children="body.getRowHasChildren(r)"\n                  expanded="body.getRowExpanded(r)"\n                  loading="body.getRowLoading(r)"\n                  ng-style="body.rowStyles(r)"\n                  is-draggable="body.isDraggable(r)">\n          </dt-row>\n        </dt-scroller>\n        <div ng-if="body.rows && !body.rows.length"\n             class="empty-row"\n             ng-bind="::body.options.emptyMessage">\n       </div>\n       <div ng-if="body.rows === undefined"\n             class="loading-row"\n             ng-bind="::body.options.loadingMessage">\n        </div>\n      </div>'}}function ScrollerDirective(){return{restrict:"E",require:"^dtBody",transclude:!0,replace:!0,template:'<div ng-style="scrollerStyles()" ng-transclude></div>',link:function(e,t,n,o){function i(){o.options.internal.offsetY=a,o.options.internal.offsetX=c,o.updatePage(),o.options.scrollbarV&&o.getRows(!0),o.options.$outer.$digest(),s=!1}function r(){s||(requestAnimFrame(i),s=!0)}var l=t.parent(),s=!1,a=0,c=0;o.options.internal.styleTranslator=new StyleTranslator(o.options.rowHeight),o.options.internal.setYOffset=function(e){l[0].scrollTop=e},l.on("scroll",function(){o._hackToAvoidUnwantedScroll_&&(this.scrollTop=a,this.scrollLeft=c,o._hackToAvoidUnwantedScroll_=void 0),a=this.scrollTop,c=this.scrollLeft,r()}),e.$on("$destroy",function(){l.off("scroll")}),e.scrollerStyles=function(){if(o.options.scrollbarV)return{height:o.count*o.options.rowHeight+"px"}}}}}function SelectionDirective(){return{controller:SelectionController,restrict:"A",require:"^dtBody",controllerAs:"selCtrl"}}function RowDirective(){return{restrict:"E",controller:RowController,controllerAs:"rowCtrl",scope:!0,bindToController:{row:"=",columns:"=",columnWidths:"=",loading:"=",expanded:"=",selected:"=",checked:"=",isDraggable:"=",hasChildren:"=",options:"=",onCheckboxChange:"&",onTreeToggle:"&"},link:function(e,t,n,o){o.row&&TranslateXY(t[0].style,0,o.row.$$index*o.options.rowHeight),o.options.internal.styleTranslator.register(e.$index,t)},template:'\n      <div class="dt-row" draggable={{rowCtrl.isDraggable}}>\n        <div class="dt-row-left dt-row-block"\n             ng-if="rowCtrl.columns[\'left\'].length"\n             ng-style="rowCtrl.stylesByGroup(\'left\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'left\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   selected="rowCtrl.selected"\n                   checked="rowCtrl.checked"\n                   loading="rowCtrl.loading"\n                   row-ctrl="rowCtrl",\n                   expanded="rowCtrl.expanded"\n                   row="rowCtrl.row"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-center dt-row-block"\n             ng-style="rowCtrl.stylesByGroup(\'center\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'center\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   loading="rowCtrl.loading"\n                   row-ctrl="rowCtrl",\n                   expanded="rowCtrl.expanded"\n                   selected="rowCtrl.selected"\n                   checked="rowCtrl.checked"\n                   row="rowCtrl.row"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-right dt-row-block"\n             ng-if="rowCtrl.columns[\'right\'].length"\n             ng-style="rowCtrl.stylesByGroup(\'right\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'right\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   selected="rowCtrl.selected"\n                   checked="rowCtrl.checked"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   row="rowCtrl.row"\n                   loading="rowCtrl.loading"\n                   row-ctrl="rowCtrl",\n                   expanded="rowCtrl.expanded"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n      </div>',replace:!0}}function GroupRowDirective(){return{restrict:"E",controller:GroupRowController,controllerAs:"group",bindToController:{row:"=",onGroupToggle:"&",expanded:"=",options:"="},scope:!0,replace:!0,template:'\n      <div class="dt-group-row">\n        <span ng-class="group.treeClass()"\n              ng-click="group.onGroupToggled($event)">\n        </span>\n        <span class="dt-group-row-label" ng-bind="group.row.name">\n        </span>\n      </div>',link:function(e,t,n,o){TranslateXY(t[0].style,0,o.row.$$index*o.options.rowHeight),o.options.internal.styleTranslator.register(e.$index,t)}}}function CellDirective(e,t){return{restrict:"E",controller:CellController,scope:!0,controllerAs:"cell",bindToController:{options:"=",value:"=",column:"=",row:"=",expanded:"=",loading:"=",rowCtrl:"<",hasChildren:"=",onTreeToggle:"&",onCheckboxChange:"&",checked:"="},template:'<div class="dt-cell"\n            data-title="{{::cell.column.name}}"\n            ng-style="cell.styles()"\n            ng-class="cell.cellClass()">\n        <label ng-if="cell.column.isCheckboxColumn" class="dt-checkbox">\n          <input type="checkbox"\n                 ng-checked="cell.checked"\n                 ng-click="cell.onCheckboxChanged($event)" />\n        </label>\n        <span ng-if="cell.column.isTreeColumn && cell.hasChildren"\n              ng-class="cell.treeClass()"\n              ng-click="cell.onTreeToggled($event)"></span>\n        <span class="dt-cell-content"></span>\n      </div>',replace:!0,compile:function(){return{pre:function(e,n,o,i){function r(){var e=null,n=null;if(i.column.editor){var o="textarea"==i.column.editor?"textarea":"input";n="{{$cell}}",e={},e.begin='<span ng-dblclick="edit($cell, $row, $column)" ng-show="!editing">',e.end="</span>\n                                    <div>\n                                      <"+o+' ng-show="editing" type="'+i.column.editor+'" ng-model="$cell" ng-change="changed($cell, $row, $column)" \n                                             ng-blur="blur($row, $column)" style="width:100%;" focus-on="editing"/>\n                                    </div>',i.row._original||(i.row._original={}),i.row._original[i.column.prop]=i.value,s._changeEditStatus=function(e,t){this.editing=!this.editing,e._editing||(e._editing={}),e._editing[t.prop]=this.editing},s.edit=function(e,t,n){return!(i.row._noEdit||s.editFilter&&!s.editFilter(t))&&(s._changeEditStatus(t,n),this.editing)},s.blur=function(e,t){this.editing&&this._changeEditStatus(e,t)},s.changed=function(e,t,n){t[n.prop]=e}}if(i.column.template){var r=angular.isFunction(i.column.template)?i.column.template(s,l[0]):i.column.template;n=r?""+r.trim():"<span>{{$cell}}</span>",n.startsWith("{{")&&(n="<span>"+n+"</span>")}if(e&&(n=e.begin+n+e.end),n){var a=angular.element(n);l.empty(),l.append(t(a)(s))}}var l=angular.element(n[0].querySelector(".dt-cell-content")),s=void 0;(i.column.template||i.column.cellRenderer||i.column.editor)&&function(){s=i.options.$outer.$new(!1),s.getValue=i.getValue}(),e.$watch("cell.row",function(){s&&s.editing&&i.row._editing&&i.row._editing[i.column.prop]||(s&&(s.getValue=i.getValue,s.$cell=i.value,s.$row=i.row,s.$column=i.column,s.editing=!1,i.row._editing&&(s.editing=i.row._editing[i.column.prop]),s.editFilter=i.options.editFilter,s.$rowCtrl||(s.$rowCtrl={rowChanges:i.rowCtrl.getChanges.bind(i.rowCtrl),submitChanges:i.rowCtrl.submitChanges.bind(i.rowCtrl)})),i.column.template||i.column.cellRenderer||i.column.editor?i._rendered||r():l[0].innerHTML=i.getValue(),i._rendered=!0,i.column.cellRenderer&&i.column.cellRenderer(s,l[0]))},!i.options.readOnly)}}}}}function FocusOnDirective(e){return{restrict:"A",link:function(t,n,o){t.$watch(o.focusOn,function(t){e(function(){t?n[0].focus():n[0].blur()})})}}}function FooterDirective(){return{restrict:"E",controller:FooterController,controllerAs:"footer",scope:!0,bindToController:{paging:"=",onPage:"&",totalText:"<"},template:'<div class="dt-footer">\n        <div class="page-count">{{footer.paging.count}} {{::footer.totalText}}</div>\n        <dt-pager page="footer.page"\n               size="footer.paging.size"\n               count="footer.paging.count"\n               on-page="footer.onPaged(page)"\n               ng-show="footer.paging.count / footer.paging.size > 1">\n         </dt-pager>\n      </div>',replace:!0}}function PagerDirective(){return{restrict:"E",controller:PagerController,controllerAs:"pager",scope:!0,bindToController:{page:"=",size:"=",count:"=",onPage:"&"},template:'<div class="dt-pager">\n        <ul class="pager">\n          <li ng-class="{ disabled: !pager.canPrevious() }">\n            <a href ng-click="pager.selectPage(1)" class="icon-prev"></a>\n          </li>\n          <li ng-class="{ disabled: !pager.canPrevious() }">\n            <a href ng-click="pager.prevPage()" class="icon-left"></a>\n          </li>\n          <li ng-repeat="pg in pager.pages track by $index" ng-class="{ active: pg.active }">\n            <a href ng-click="pager.selectPage(pg.number)">{{pg.text}}</a>\n          </li>\n          <li ng-class="{ disabled: !pager.canNext() }">\n            <a href ng-click="pager.nextPage()" class="icon-right"></a>\n          </li>\n          <li ng-class="{ disabled: !pager.canNext() }">\n            <a href ng-click="pager.selectPage(pager.totalPages)" class="icon-skip"></a>\n          </li>\n        </ul>\n      </div>',replace:!0}}function PopoverDirective(e,t,n,o,i,r,l,s,a){function c(e,t){return e?angular.isString(e)&&t?e:r.get(e)||o.get(e,{cache:!0}):""}function u(e){if(e&&0!==e.length){e="true"===e.toString().toLowerCase()}else e=!1;return e}return{restrict:"A",scope:!0,replace:!1,link:function(o,r,d){function h(){o.exitTimeout=l(C,500)}function p(){l.cancel(o.exitTimeout)}function f(){var e=r[0].getBoundingClientRect();if(!(e.width&&o.$parent.$column&&o.$parent.$column.width-5>=e.width)){p(),o.options.text=d.popoverText;var t=n[0].getElementById(o.options.popoverId);o.popover&&t||(o.options.text&&!o.options.template?m():g())}}function g(){i.when(c(o.options.template,o.options.plain)).then(function(e){angular.isString(e)||(e=e.data&&angular.isString(e.data)?e.data:""),v("template"),o.popover.html(e),t(o.popover)(o),angular.element(n.body).append(o.popover),y(r,o.popover,o.options),w()})}function m(){v("text"),o.popover.html(o.options.text),angular.element(n[0].body).append(o.popover),w()}function v(e){o.popover=angular.element('<div\n          class="dt-popover popover'+o.options.placement+'"\n          id="'+o.options.popoverId+'"></div>'),"text"===e&&o.popover.addClass("popover-text")}function w(){y(r,o.popover,o.options),o.popover.on("mouseleave",h),o.popover.on("mousemove",p),s.add(o.options.popoverId,{element:r,popover:o.popover})}function C(){o.popover&&(o.popover.off(),o.popover.remove()),o.popover=null,s.remove(o.options.popoverId)}function y(t,n,i){l(function(){function r(){return a.calculateVerticalAlignment(s,c,i.alignment)}function l(){return a.calculateHorizontalAlignment(s,c,i.alignment)}var s=t[0].getBoundingClientRect(),c=n[0].getBoundingClientRect(),u=void 0,d=void 0;i.placement===POSITION.RIGHT?(d=s.left+s.width+i.spacing,u=r()):i.placement===POSITION.LEFT?(d=s.left-c.width-i.spacing,u=r()):i.placement===POSITION.TOP?(u=s.top-c.height-i.spacing,d=l()):i.placement===POSITION.BOTTOM&&(u=s.top+s.height+i.spacing,d=l()),n.css({top:u+"px",left:d+"px",height:c.height,"overflow-x":"hidden"}),o.options.showCaret&&b(o.popover,s,c),e.addClass(o.popover,"popover-animation")},50)}function b(e,t,n){function i(){return a.calculateVerticalCaret(t,n,s,o.options.alignment)}function r(){return a.calculateHorizontalCaret(t,n,s,o.options.alignment)}var l=angular.element('<span class="popover-caret caret-'+o.options.placement+'"></span>');e.append(l);var s=l[0].getBoundingClientRect(),c=void 0,u=void 0;o.options.placement===POSITION.RIGHT?(c=-6,u=i()):o.options.placement===POSITION.LEFT?(c=n.width-2,u=i()):o.options.placement===POSITION.TOP?(u=n.height-5,c=r()):o.options.placement===POSITION.BOTTOM&&(u=-8,c=r()),l.css({top:u+"px",left:c+"px"})}o.popover=null,o.options={alignment:d.popoverAlignment||"middle",placement:d.popoverPlacement||"right",plain:u(d.popoverPlain||!1),popoverId:d.popoverId,showCaret:u(d.popoverPlain||!1),spacing:parseInt(d.popoverSpacing,10)||0,template:d.popoverTemplate,text:d.popoverText},o.$on("$destroy",function(){r.off()}),r.on("mouseenter",f),r.on("mouseleave",h),r.on("mousemove",p)}}}function PopoverRegistry(){var e={};return{add:function(t,n){return e[t]=n,e[t]},find:function(t){return e[t]},remove:function(t){delete e[t]}}}function PositionHelper(e){function t(e){var t=0;return e.forEach(function(e,n){t=0===n?t+=e:t-=e}),t}return{calculateHorizontalAlignment:function(t,n,o){switch(o){case POSITION.LEFT:return t.left;case POSITION.RIGHT:return t.left+(t.width-n.width);case POSITION.CENTER:return t.left+(t.width/2-n.width/2);default:return e.warn("calculateHorizontalAlignment issue",this)}},calculateVerticalAlignment:function(t,n,o){switch(o){case POSITION.TOP:return t.top;case POSITION.BOTTOM:return t.top+(t.height-n.height);case POSITION.MIDDLE:return t.top+(t.height/2-n.height/2);default:return e.warn("calculateVerticalAlignment issue",this)}},calculateVerticalCaret:function(n,o,i,r){switch(r){case POSITION.TOP:return t([n.height/2,i.height/2,1]);case POSITION.BOTTOM:return t([o.height,n.height/2,i.height/2,1]);case POSITION.MIDDLE:return t([o.height/2,i.height/2,1]);default:return e.warn("calculateVerticalCaret issue",this)}},calculateHorizontalCaret:function(n,o,i,r){switch(r){case POSITION.LEFT:return t([n.width/2,i.height/2,1]);case POSITION.RIGHT:return t([o.width,n.width/2,i.height/2,1]);case POSITION.CENTER:return t([o.width/2,i.height/2,1]);default:
return e.warn("calculateHorizontalCaret issue",this)}}}}function MenuDirective(){return{restrict:"E",controller:"MenuController",controllerAs:"dtm",scope:{current:"=",available:"="},template:'<div class="dt-menu dropdown" close-on-click="false">\n        <a href="#" class="dropdown-toggle icon-add">\n          Configure Columns\n        </a>\n        <div class="dropdown-menu" role="menu" aria-labelledby="dropdown">\n          <div class="keywords">\n            <input type="text"\n                   click-select\n                   placeholder="Filter columns..."\n                   ng-model="columnKeyword"\n                   autofocus />\n          </div>\n          <ul>\n            <li ng-repeat="column in available | filter:columnKeyword">\n              <label class="dt-checkbox">\n                <input type="checkbox"\n                       ng-checked="dtm.isChecked(column)"\n                       ng-click="dtm.onCheck(column)">\n                {{column.name}}\n              </label>\n            </li>\n          </ul>\n        </div>\n      </div>'}}function DropdownDirective(e,t){return{restrict:"C",controller:"DropdownController",link:function(n,o){function i(e){o[0].contains(e.target)||t(function(){n.open=!1,l()})}function r(e){27===e.which&&t(function(){n.open=!1,l()})}function l(){e.unbind("click",i),e.unbind("keydown",r)}n.$watch("open",function(t){t&&(e.bind("click",i),e.bind("keydown",r))})}}}function DropdownToggleDirective(e){return{restrict:"C",controller:"DropdownController",require:"?^dropdown",link:function(t,n,o,i){function r(t){t.preventDefault(),e(function(){i.toggle()})}function l(){n.unbind("click",r)}n.bind("click",r),t.$on("$destroy",l)}}}function DropdownMenuDirective(e){return{restrict:"C",require:"?^dropdown",link:function(t,n){t.$watch("open",function(){e[t.open?"addClass":"removeClass"](n,"ddm-open")})}}}DraggableRowDirective.$inject=["$document"],PositionHelper.$inject=["$log"],PopoverDirective.$inject=["$animate","$compile","$document","$http","$q","$templateCache","$timeout","PopoverRegistry","PositionHelper"],DropdownDirective.$inject=["$document","$timeout"],DropdownToggleDirective.$inject=["$timeout"],DropdownMenuDirective.$inject=["$animate"],DataTableDirective.$inject=["$window","$timeout","$parse"],ResizableDirective.$inject=["$document","$timeout"],HeaderDirective.$inject=["$timeout"],HeaderCellDirective.$inject=["$compile"],CellDirective.$inject=["$rootScope","$compile"],FocusOnDirective.$inject=["$timeout"],Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();!function(){Array.prototype.move||(Array.prototype.move=function(e,t){for(;e<0;)e+=this.length;for(;t<0;)t+=this.length;if(t>=this.length)for(var n=t-this.length;1+n--;)this.push(void 0);return this.splice(t,0,this.splice(e,1)[0]),this}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if(!angular.isFunction(e))throw new TypeError("predicate must be a function");for(var n=Object(this),o=n.length>>>0,i=void 0,r=0;r<o;r+=1)if(i=n[r],e.call(t,i,r,n))return i}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(!angular.isFunction(e))throw new TypeError("predicate must be a function");for(var n=Object(this),o=n.length>>>0,i=void 0,r=0;r<o;r+=1)if(i=n[r],e.call(t,i,r,n))return r;return-1},enumerable:!1,configurable:!1,writable:!1})}();var TableDefaults={checkboxSelection:!1,autoCheckSubNodes:!0,columnMode:"standard",emptyMessage:"No data to display",totalString:"total",footerHeight:0,headerHeight:30,fixedHeader:!0,internal:{offsetX:0,offsetY:0,innerWidth:0,bodyHeight:300},loadingIndicator:!1,loadingMessage:"Loading...",multiSelect:!1,paging:{count:0,offset:0,mode:null,size:10},reorderable:!1,rowHeight:30,scrollbarV:!0,selectable:!1,rowSelectionColor:"lightblue",sortable:!0,sortType:"multiple",modifierActive:!0,rowDraggable:!1,editFilter:null,readOnly:!1,filterPlaceholder:"Filter",treeToggleDblClick:!1,fontSize:null},ColumnDefaults={canAutoResize:!0,cellDataGetter:void 0,cellRenderer:void 0,className:void 0,comparator:void 0,flexGrow:0,frozenLeft:!1,frozenRight:!1,group:!1,headerCheckbox:!1,headerClassName:void 0,headerRenderer:void 0,isCheckboxColumn:!1,isTreeColumn:!1,maxWidth:void 0,minWidth:100,resizable:!0,sortable:!0,sort:void 0,sortBy:void 0,width:150},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),DataTableController=function(){function e(t,n,o,i){_classCallCheck(this,e),_extends(this,{$scope:t,$filter:n,$q:o,$attrs:i}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope","$filter","$q","$attrs"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.defaults(),this.options.$outer=this.$scope.$parent,this.$scope.$watch("dt.options.columns",function(t,n){e.transposeColumnDefaults(),t.length!==n.length&&e.adjustColumns(),e.calculateColumns()},!0),this.$scope.$watchCollection("dt.rows",function(t,n){t&&n&&t.length>n.length&&e.onSorted()})}},{key:"defaults",value:function(){var e=this;this.expanded=this.expanded||{};var t=angular.copy(TableDefaults);this.options=_extends({},t,this.options),angular.forEach(t.paging,function(t,n){e.options.paging[n]||(e.options.paging[n]=t)}),this.options.selectable&&this.options.multiSelect&&(this.selected=this.selected||[],this.$scope.$watch("dt.selected",function(){angular.forEach(e.options.columns,function(t){t.headerCheckbox&&angular.isFunction(t.headerCheckboxCallback)&&t.headerCheckboxCallback(e)})},!0))}},{key:"transposeColumnDefaults",value:function(){for(var e=this,t=0,n=this.options.columns.length;t<n;t+=1)!function(t,n){var o=e.options.columns[t];o.$id=ObjectId(),angular.forEach(ColumnDefaults,function(e,t){Object.prototype.hasOwnProperty.call(o,t)||(o[t]=e)}),o.name&&!o.prop&&(o.prop=CamelCase(o.name)),e.options.columns[t]=o}(t)}},{key:"inheritColumnSortableProps",value:function(){var e=this;angular.forEach(this.options.columns,function(t){t.sortable=angular.isDefined(t.sortable)?t.sortable:e.options.sortable})}},{key:"calculateColumns",value:function(){var e=this.options.columns;this.columnsByPin=ColumnsByPin(e),this.columnWidths=ColumnGroupWidths(this.columnsByPin,e)}},{key:"tableCss",value:function(){return{fixed:this.options.scrollbarV,selectable:this.options.selectable,checkboxable:this.options.checkboxSelection}}},{key:"tableStyles",value:function(){var e={};return this.options.fontSize&&(e["font-size"]=this.options.fontSize),e}},{key:"adjustColumns",value:function(e){var t=this.options.internal.innerWidth-this.options.internal.scrollBarWidth;"force"===this.options.columnMode?ForceFillColumnWidths(this.options.columns,t,e):"flex"===this.options.columnMode&&AdjustColumnWidths(this.options.columns,t)}},{key:"calculatePageSize",value:function(){var e=this.options.internal.bodyHeight%this.options.rowHeight;this.options.paging.size=0===e?this.options.internal.bodyHeight/this.options.rowHeight:Math.ceil(this.options.internal.bodyHeight/this.options.rowHeight)-1}},{key:"onSorted",value:function(){if(this.rows){var e=this.options.columns.filter(function(e){return e.sort}).sort(function(e,t){if(e.sortPriority&&t.sortPriority){if(e.sortPriority>t.sortPriority)return 1;if(e.sortPriority<t.sortPriority)return-1}else{if(e.sortPriority)return-1;if(t.sortPriority)return 1}return 0}).map(function(e,t){return e.sortPriority=t+1,e});if(e.length){this.onSort&&this.onSort({sorts:e}),this.options.onSort&&this.options.onSort(e);for(var t=[],n=0,o=e.length;n<o;n+=1){var i=e[n];if(!1!==i.comparator){var r="asc"===i.sort?"":"-";angular.isDefined(i.sortBy)?t.push(r+i.sortBy):t.push(r+i.prop)}}if(t.length){var l,s=this.$filter("orderBy")(this.rows,t);this.rows.splice(0,this.rows.length),(l=this.rows).push.apply(l,_toConsumableArray(s))}}this.options.internal&&this.options.internal.setYOffset&&this.options.internal.setYOffset(0)}}},{key:"onTreeToggled",value:function(e,t){this.onTreeToggle({row:e,cell:t})}},{key:"onTreeLoad",value:function(e,t){return this.onTreeLoader({row:e,cell:t})}},{key:"onRowsFiltered",value:function(e){this.onFiltered({rows:e})}},{key:"onBodyPage",value:function(e,t){this.onPage({offset:e,size:t})}},{key:"onFooterPage",value:function(e,t){var n=this.options.rowHeight*t,o=n*e;this.options.internal.setYOffset(o)}},{key:"selectAllRows",value:function(){var e;return this.selected.splice(0,this.selected.length),(e=this.selected).push.apply(e,_toConsumableArray(this.rows)),this.isAllRowsSelected()}},{key:"deselectAllRows",value:function(){return this.selected.splice(0,this.selected.length),this.isAllRowsSelected()}},{key:"isAllRowsSelected",value:function(){return!(!this.rows||!this.selected)&&this.selected.length===this.rows.length}},{key:"onResized",value:function(e,t){var n=this.options.columns.indexOf(e),o=e;n>-1&&(o=this.options.columns[n],e.width=t,e.canAutoResize=!1,this.adjustColumns(n),this.calculateColumns()),this.onColumnResize&&this.onColumnResize({column:o,width:t})}},{key:"onSelected",value:function(e){this.onSelect({rows:e})}},{key:"onRowClicked",value:function(e){this.onRowClick({row:e})}},{key:"onRowDblClicked",value:function(e){this.onRowDblClick({row:e})}},{key:"moveRow",value:function(e,t){if(!this.$attrs.onMoveRow)return this.$q.resolve();var n=this.onMoveRow({rowFrom:e,rowTo:t});if(!(n instanceof this.$q))throw new Error("onMoveRow must return $q instance");return n}}]),e}(),DataTableService={columns:{},dTables:{},saveColumns:function(e,t){if(t&&t.length){var n=[].slice.call(t);this.dTables[e]=n}},buildColumns:function(e,t){var n=this;angular.forEach(this.dTables,function(o,i){n.columns[i]=[],angular.forEach(o,function(o){var r={},l=!0;angular.forEach(o.attributes,function(n){var o=CamelCase(n.name);switch(o){case"class":r.className=n.value;break;case"name":case"prop":r[o]=n.value;break;case"headerRenderer":case"cellRenderer":case"cellDataGetter":r[o]=t(n.value);break;case"visible":l=t(n.value)(e);break;default:r[o]=t(n.value)(e)}});var s=o.getElementsByTagName("column-header");s.length&&(r.headerTemplate=s[0].innerHTML,o.removeChild(s[0])),""!==o.innerHTML&&(r.template=o.innerHTML),l&&n.columns[i].push(r)})}),this.dTables={}}},cache={},testStyle=document.createElement("div").style,prefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),ua=window.navigator.userAgent,transform=GetVendorPrefixedName("transform"),backfaceVisibility=GetVendorPrefixedName("backfaceVisibility"),hasCSSTransforms=!!GetVendorPrefixedName("transform"),hasCSS3DTransforms=!!GetVendorPrefixedName("perspective"),isSafari=/Safari\//.test(ua)&&!/Chrome\//.test(ua),HeaderController=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"styles",value:function(){return{width:this.options.internal.innerWidth+"px",height:this.options.headerHeight+"px"}}},{key:"innerStyles",value:function(){return{width:this.columnWidths.total+"px"}}},{key:"onSorted",value:function(e,t){function n(t){t!==e&&(t.sort=void 0)}("single"===this.options.sortType&&(!this.options.modifierActive||!t)||"multiple"===this.options.sortType&&this.options.modifierActive&&t)&&(this.columns.left.forEach(n),this.columns.center.forEach(n),this.columns.right.forEach(n)),this.onSort({column:e})}},{key:"onFilter",value:function(e,t){this.onFiltered({column:e,filterKeywords:t})}},{key:"stylesByGroup",value:function(e){var t={width:this.columnWidths[e]+"px"};if("center"===e)TranslateXY(t,-1*this.options.internal.offsetX,0);else if("right"===e){var n=-1*(this.columnWidths.total-this.options.internal.innerWidth);TranslateXY(t,n,0)}return t}},{key:"onResized",value:function(e,t){this.onResize({column:e,width:t})}}]),e}(),HeaderCellController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;if(this.column.headerCheckbox&&(this.column.headerCheckboxCallback=this.rowSelected),this.$scope.$parent.$parent.$parent.$parent.dt&&(this.dt=this.$scope.$parent.$parent.$parent.$parent.dt),this.column.filter){var t=this;this.$scope.$watch(function(){return e.column.filterKeywords},function(e){angular.isUndefined(e)||t.onFilter({column:t.column,filterKeywords:e})})}}},{key:"styles",value:function(){return{width:this.column.width+"px",minWidth:this.column.minWidth+"px",maxWidth:this.column.maxWidth+"px",height:this.column.height?this.column.height+"px":"100%"}}},{key:"cellClass",value:function(){var e={sortable:this.column.sortable,resizable:this.column.resizable};return this.column.headerClassName&&(e[this.column.headerClassName]=!0),e}},{key:"onSorted",value:function(e){this.column.sortable&&(this.column.sort=NextSortDirection(this.sortType,this.column.sort),angular.isUndefined(this.column.sort)&&(this.column.sortPriority=void 0),this.onSort({column:this.column,modifierPressed:e.shiftKey}))}},{key:"onFilterClick",value:function(e){e.stopPropagation()}},{key:"sortClass",value:function(){return{"sort-btn":!0,"sort-asc icon-down":"asc"===this.column.sort,"sort-desc icon-up":"desc"===this.column.sort}}},{key:"onResized",value:function(e,t){this.onResize({column:t,width:e})}},{key:"rowSelected",value:function(e){this.allRowsSelected=e.selected&&e.rows.length===e.selected.length}},{key:"checkboxChangeCallback",value:function(){return this.isAllRowsSelected=this.column.allRowsSelected,this.isAllRowsSelected?this.dt.selectAllRows():this.dt.deselectAllRows()}}]),e}(),TREE_TYPES={GROUP:"refreshGroups",TREE:"refreshTree"},BodyController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var t=this;this.tempRows=[],this.watchListeners=[],this.options.checkboxSelection&&(this.checkedRows=new Map),this.loading={},this.setTreeAndGroupColumns(),this.setConditionalWatches(),this.$scope.$watch("body.options.columns",function(n,o){if(n){var i=t.filterChanged();if(i)return void(t.treeColumn||t.groupColumn?(t._applyFilter=i,t.rowsUpdated()):t.rows=t.doFilter(i));t.rows=t.doFilter();var r=angular.copy(t.treeColumn),l=angular.copy(t.groupColumn);t.setTreeAndGroupColumns(),t.setConditionalWatches(),(t.treeColumn&&r!==t.treeColumn||t.groupColumn&&l!==t.groupColumn)&&(t.rowsUpdated(t.rows),t.treeColumn?t.refreshTree():t.groupColumn&&t.refreshGroups()),e.isColumnsReordered(n,o)?t.headerReordered():e.isAddOrRemoveColumns(n,o)?t.createFilters(!0):t.createFilters()}},!0);var n=this;this.$scope.$watchCollection("body.rows",function(e,t){e!==t&&(e&&n.treeColumn&&!n._dueFiltering_&&(n.filteredRows=n.doFilter()),n._dueFiltering_=!1,n.rowsUpdated(e,t))})}},{key:"setTreeAndGroupColumns",value:function(){this.options&&this.options.columns&&(this.treeColumn=this.options.columns.find(function(e){return e.isTreeColumn}),this.treeColumn?(this.groupColumn=void 0,this.treeColumn.parentRelationProp||(this.treeColumn.parentRelationProp=this.treeColumn.prop)):this.groupColumn=this.options.columns.find(function(e){return e.group}))}},{key:"buildInternalPage",value:function(){var e=void 0,t=void 0;for(this.tempRows.splice(0,this.tempRows.length),e=0;e<this.options.paging.size;e+=1)if(t=this.options.paging.offset*this.options.paging.size+e,this.treeColumn){if(!angular.isDefined(this.treeRows)||!angular.isDefined(this.treeRows[t]))break;this.tempRows[e]=this.treeRows[t]}else{if(!angular.isDefined(this.rows[t]))break;this.tempRows[e]=this.rows[t]}}},{key:"setConditionalWatches",value:function(){for(var e=this,t=this.watchListeners.length-1;t>=0;t-=1)this.watchListeners[t](),this.watchListeners.splice(t,1);if(this.options&&(this.options.scrollbarV||!this.options.scrollbarV&&this.options.paging&&this.options.paging.size)){var n=!1;this.watchListeners.push(this.$scope.$watch("body.options.paging.size",function(t,o){(!n||t>o)&&(e.getRows(),n=!0)})),this.watchListeners.push(this.$scope.$watch("body.options.paging.count",function(t){e.count=t,e.updatePage()})),this.watchListeners.push(this.$scope.$watch("body.options.paging.offset",function(t){e.options.paging.size&&("internal"===e.options.paging.mode&&e.buildInternalPage(),e.onPage&&e.onPage({offset:t,size:e.options.paging.size}))}))}}},{key:"rowsUpdated",value:function(e,t){var n=this;if(e&&"external"!==this.options.paging.mode&&(this.options.paging.count=e.length),this.noNeedRowsUpdated)return void(this.noNeedRowsUpdated=!1);if(e)if(this.count=e.length,(this.treeColumn||this.groupColumn)&&this.buildRowsByGroup(),this.options.scrollbarV){var o=e&&t&&e.length!=t.length;this.getRows(o)}else{var i=this.rows;if(this.treeColumn?i=this.buildTree():this.groupColumn&&(i=this.buildGroups()),"external"===this.options.paging.mode){var r=this.getFirstLastIndexes(),l=r.first;for(this.tempRows.splice(0,this.tempRows.length);l<r.last;)this.tempRows.push(i[l+=1])}else if("internal"===this.options.paging.mode)this.buildInternalPage();else{var s;this.tempRows.splice(0,this.tempRows.length),(s=this.tempRows).push.apply(s,_toConsumableArray(i))}}else this.getRows(!0);this.options.checkboxSelection&&(this.checkedRows.clear(),e&&e.forEach(function(e){angular.isDefined(e._checked)&&n.checkedRows.set(e,e._checked)}))}},{key:"getFirstLastIndexes",value:function(){var e=0,t=this.count;return this.options.scrollbarV?(e=Math.max(Math.floor((this.options.internal.offsetY||0)/this.options.rowHeight,0),0),t=Math.min(e+this.options.paging.size,this.count)):"external"===this.options.paging.mode&&(e=Math.max(this.options.paging.offset*this.options.paging.size,0),t=Math.min(e+this.options.paging.size,this.count)),{first:e,last:t}}},{key:"updatePage",value:function(){var e=this.options.paging.offset,t=this.getFirstLastIndexes();angular.isUndefined(this.options.internal.oldScrollPosition)&&(this.options.internal.oldScrollPosition=0);var n=this.options.internal.oldScrollPosition,o=t.first/this.options.paging.size;this.options.internal.oldScrollPosition=o,o=o<n?Math.floor(o):o>n?Math.ceil(o):e,isNaN(o)||(this.options.paging.offset=o)}},{key:"calculateDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,o=this.treeColumn.prop;if(!e[n])return t;if(e.$$depth)return e.$$depth+t;var i=this.index[e[n]];if(i)return t+=1,this.calculateDepth(i,t);for(var r=0,l=this.rows.length;r<l;r+=1){var s=this.rows[r];if(s[o]===e[n])return t+=1,this.calculateDepth(s,t)}return t}},{key:"buildRowsByGroup",value:function(){this.index={},this.rowsByGroup={};var e=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,t="";this.treeColumn&&(t=this.treeColumn.parentRelationProp);for(var n=0,o=this.rows.length;n<o;n+=1){var i=this.rows[n];this.processNode(i,null,t,e)}}},{key:"buildTreeNode",value:function(e,t){if(e&&t){var n=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,o="";this.treeColumn&&(o=this.treeColumn.parentRelationProp);for(var i=0,r=t.length;i<r;i+=1){var l=t[i];this.rows.push(l),this.processNode(l,e,o,n)}}}},{key:"processNode",value:function(e,t,n,o){e._lazyChildren&&n&&!this.rowsByGroup[e[n]]&&(this.rowsByGroup[e[n]]=[]);var i=t?t[n]:e[o];if(i&&(this.rowsByGroup[i]?this.rowsByGroup[i].push(e):this.rowsByGroup[i]=[e]),this.treeColumn){var r=this.treeColumn.parentRelationProp;if(this.index[e[r]]=e,e[o]){if(t||(t=this.index[e[o]]),angular.isUndefined(t))for(var l=0,s=this.rows.length;l<s;l+=1)if(this.rows[l][r]===i){t=this.rows[l];break}angular.isUndefined(t.$$depth)&&(t.$$depth=this.calculateDepth(t)),e.$$depth=t.$$depth+1,t.$$children?t.$$children.includes(e[r])||t.$$children.push(e[r]):t.$$children=[e[r]]}else e.$$depth=0}}},{key:"buildGroups",value:function(){var e=this,t=[];return angular.forEach(this.rowsByGroup,function(n,o){t.push({name:o,group:!0}),e.expanded[o]&&t.push.apply(t,_toConsumableArray(n))}),t}},{key:"isSelected",value:function(e){var t=!1;return this.options.selectable&&(t=this.options.multiSelect?this.selected.indexOf(e)>-1:this.selected===e),t}},{key:"onSelected",value:function(e){e&&e.length&&this.options.selectable&&(this.options.multiSelect||(this.selected=e[0])),this.onSelect({rows:e})}},{key:"isDraggable",value:function(e){return this.options.rowDraggable}},{key:"onDropRow",value:function(e,t,n){var o=this.rows.find(function(e){return e.$$index==t}),i=this.rows.find(function(e){return e.$$index==n}),r=this;this.onMoveRow({rowFrom:o,rowTo:i}).then(function(){r.treeColumn?(i?i._lazyChildren&&!i._loaded_?r.removeTreeRows(o[r.treeColumn.parentRelationProp]):(r.removeChild(o[r.treeColumn.relationProp],o[r.treeColumn.parentRelationProp]),o[r.treeColumn.relationProp]=i[r.treeColumn.parentRelationProp]):o[r.treeColumn.relationProp]=null,r.buildRowsByGroup(),r.refreshTree()):(r.rows.move(t,n),r.groupColumn?r.refreshGroups():r.getRows(!0))}).catch(function(e){return console.error(e)})}},{key:"removeChild",value:function(e,t){var n=this.treeColumn.parentRelationProp,o=this.rows.find(function(t){return t[n]===e});if(o&&o.$$children){var i=o.$$children.findIndex(function(e){return e===t});-1!==i&&o.$$children.splice(i,1)}}},{key:"removeTreeRows",value:function(e){var t=this,n=this.getRowInTree(e),o=n.index,i=n.row;i&&(this.rows.splice(o,1),this.checkedRows&&this.checkedRows.delete(i),this.expanded[e]&&delete this.expanded[e],i.$$children&&i.$$children.forEach(function(e){t.removeTreeRows(e)}))}},{key:"getRowInTree",value:function(e){var t=this.treeColumn.parentRelationProp,n=null,o=this.rows.findIndex(function(n){return n[t]===e});return-1!==o&&(n=this.rows[o]),{index:o,row:n}}},{key:"buildTree",value:function(){function e(t,i,r){t.forEach(function(t){var l=t[n.treeColumn.relationProp],s=t[n.treeColumn.parentRelationProp],a=n.rowsByGroup[s];o&&a&&a.length>0&&(n.expanded[s]=!0);var c=n.expanded[s];(r>0||!l)&&(n.filteredRows.includes(t)&&i.push(t),a&&a.length>0&&c&&e(a,i,r+1))})}var t=[],n=this;this.filteredRows||(this.filteredRows=this.rows);var o=!1;return this._applyFilter&&(this.filteredRows=this.doFilter(this._applyFilter),this._applyFilter=null,o=!0),e(this.rows,t,0),"internal"===this.options.paging.mode&&(this.treeRows=t),t}},{key:"getRows",value:function(e){if((this.treeColumn||this.groupColumn)&&!this.rowsByGroup)return!1;this.tempRows.forEach(function(e){return delete e.$$index});var t=void 0;this.treeColumn?(t=this.treeTemp||[],!e&&this.treeTemp||(this.treeTemp=t=this.buildTree(),this.count=t.length,this.tempRows.splice(0,this.tempRows.length))):this.groupColumn?(t=this.groupsTemp||[],!e&&this.groupsTemp||(this.groupsTemp=t=this.buildGroups(),this.count=t.length)):(t=this.rows,!0===e&&this.tempRows.splice(0,this.tempRows.length));var n=0,o=this.getFirstLastIndexes(),i=o.first;for(this.tempRows.splice(0,o.last-o.first);i<=o.last&&i<this.count;){var r=t[i];r&&(r.$$index=i,this.tempRows[n]=r),n+=1,i+=1}return this.options.internal&&this.options.internal.styleTranslator&&this.options.internal.styleTranslator.update(this.tempRows),this.tempRows}},{key:"styles",value:function(){var e={width:this.options.internal.innerWidth+"px"};if(this.options.scrollbarV?!1===this.options.scrollbarH&&(e.overflowX="hidden"):e.overflowY="hidden",this.options.scrollbarV&&(e.height=this.options.internal.bodyHeight+"px"),this.options.fixedHeader){if(!this.options.scrollbarV){var t=this.options.headerHeight+this.options.footerHeight;e.height="calc(calc(100% - "+t+"px)"}e.overflowY="auto"}return e}},{key:"rowStyles",value:function(e){var t={};return"auto"===this.options.rowHeight&&(t.height=this.options.rowHeight+"px"),this.isSelected(e)&&(t.backgroundColor=this.options.rowSelectionColor,t.color="#fff"),t}},{key:"groupRowStyles",value:function(e){var t=this.rowStyles(e);return t.width=this.columnWidths.total+"px",t}},{key:"rowClasses",value:function(e){var t={selected:this.isSelected(e),"dt-row-even":e&&e.$$index%2==0,"dt-row-odd":e&&e.$$index%2!=0};return this.treeColumn&&(t["dt-leaf"]=this.rowsByGroup[e[this.treeColumn.relationProp]],t["dt-has-leafs"]=this.rowsByGroup[e[this.treeColumn.parentRelationProp]],t["dt-depth-"+e.$$depth]=!0),t}},{key:"getRowValue",value:function(e){return this.tempRows[e]}},{key:"getRowExpanded",value:function(e){return this.treeColumn?!(!e||!this.treeColumn.parentRelationProp)&&this.expanded[e[this.treeColumn.parentRelationProp]]:this.groupColumn?this.expanded[e.name]:void 0}},{key:"getRowLoading",value:function(e){return this.treeColumn?this.loading[e[this.treeColumn.parentRelationProp]]:this.groupColumn?this.loading[e.name]:void 0}},{key:"refresh",value:function(){this.getRows(!0)}},{key:"getRowHasChildren",value:function(e){if(this.treeColumn){var t=this.rowsByGroup[e[this.treeColumn.parentRelationProp]];return angular.isDefined(t)||t&&!t.length}}},{key:"refreshTree",value:function(){this.refresh(TREE_TYPES.TREE)}},{key:"onTreeToggled",value:function(e,t){var n=this,o=e[this.treeColumn.parentRelationProp],i=this;this._hackToAvoidUnwantedScroll_=!0,e._lazyChildren&&!e._loaded_?(this.expanded[o]=!1,this.loading[o]=!0,this.onTreeLoad(e,t).then(function(n){e._loaded_=!0,i.noNeedRowsUpdated=!0,i.buildTreeNode(e,n),i.filteredRows=i.doFilter(),i.onTreeToggledProcess(e,t),i.loading[o]=!1}).catch(function(e){i.loading[o]=!1,n.$log.error(e)})):this.onTreeToggledProcess(e,t)}},{key:"onTreeToggledProcess",value:function(e,t){var n=e[this.treeColumn.parentRelationProp];this.expanded[n]=!this.expanded[n],this.refreshTree(),this.onTreeToggle({row:e,cell:t})}},{key:"onTreeLoad",value:function(e,t){return this.onTreeLoader({row:e,cell:t})}},{key:"refreshGroups",value:function(){this.refresh(TREE_TYPES.GROUP)}},{key:"onGroupToggle",value:function(e){this.expanded[e.name]=!this.expanded[e.name],this.refreshGroups()}},{key:"filterChanged",value:function(){if(!this.filters)return!1;for(var e=0;e<this.options.columns.length;e++){var t=this.options.columns[e];if(t.filter){var n=this.filters[t.name];if(n&&n.phrase!=t.filterKeywords)return n.phrase=t.filterKeywords,n}}return!1}},{key:"createFilters",value:function(e){if(e||!this.filters){this.filters={list:[]};var t=this;this.options.columns.forEach(function(e,n){if(e.filter){var o={name:e.name,prop:e.prop,getter:e.cellDataGetter,rowsBefore:null,rowsAfter:null,phrase:null,order:n};t.filters.list.push(o),t.filters[e.name]=o}})}}},{key:"headerReordered",value:function(){if(this.filters&&this.filters.list.length){var e=this.filters.list[0].rowsBefore;this.filters.list=[];var t=this;this.options.columns.forEach(function(e,n){if(e.filter){var o=t.filters[e.name];o.rowsBefore=null,o.rowsAfter=null,o.order=n,t.filters.list.push(o)}}),this.filters.list.length&&(this.filters.list[0].rowsBefore=e,this.filters.list[0].rowsAfter=e),this.rows=this.doFilter(this.filters.list[0])}}},{key:"filterPipe",value:function(e){for(var t=this,n=this.rows,o=e.order;o<this.filters.list.length;o++){(function(o){var i=t.filters.list[o];if(o>e.order){if(!i.phrase)return i.rowsBefore=null,i.rowsAfter=null,"continue";i.rowsBefore=n}n=i.rowsAfter=i.rowsBefore.filter(function(e){var t=i.getter?i.getter(e[i.prop]):e[i.prop];return t&&-1!==t.toString().toLowerCase().indexOf(i.phrase)||!i.phrase})})(o)}return n}},{key:"doFilter",value:function(e){if(!this.rows||!this.filters||!this.filters.list.length)return this.rows;if(this._dueFiltering_=!0,this.filters.list.length&&!this.filters.list[0].rowsBefore&&(this.filters.list[0].rowsBefore=this.rows,this.filters.list[0].rowsAfter=this.rows),e){if(!e.rowsBefore)for(var t=e.order-1;t>=0;){var n=this.filters.list[t];if(n.rowsAfter){e.rowsBefore=n.rowsAfter;break}t--}}else e=this.filters.list[0],e.rowsBefore=this.rows;var o=this.filterPipe(e);return this.onRowsFiltered({rows:o}),o}}],[{key:"isColumnsReordered",value:function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].$id!==t[n].$id)return!0;return!1}},{key:"isAddOrRemoveColumns",value:function(e,t){return!(!e||!t)&&e.length!==t.length}}]),e}(),StyleTranslator=function(){function e(t){_classCallCheck(this,e),this.height=t,this.map=new Map}return _createClass(e,[{key:"update",value:function(e){if(!angular.isUndefined(this.height)&&!isNaN(+this.height))for(var t=0;t<=this.map.size;){var n=this.map.get(t),o=e[t];n&&o&&TranslateXY(n[0].style,0,o.$$index*this.height),t+=1}}},{key:"register",value:function(e,t){this.map.set(e,t)}}]),e}(),KEYS={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},SelectionController=function(){function e(t){_classCallCheck(this,e),this.$scope=t,this.body=t.body,this.options=t.body.options,this.selected=t.body.selected,isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){this.checkedRows=this.body.checkedRows,this.options&&this.options.columns&&(this.hasTreeColumn=null!=this.options.columns.find(function(e){return e.isTreeColumn}))}},{key:"keyDown",value:function(e,t,n){if(KEYS[e.keyCode]&&e.preventDefault(),e.keyCode===KEYS.DOWN){var o=e.target.nextElementSibling;o&&o.focus()}else if(e.keyCode===KEYS.UP){var i=e.target.previousElementSibling;i&&i.focus()}else e.keyCode===KEYS.RETURN&&this.selectRow(t,n)}},{key:"rowClicked",value:function(e,t,n){this.options.checkboxSelection||this.selectRow(e,t,n),this.body.onRowClick({row:n})}},{key:"rowDblClicked",value:function(e,t,n){this.options.checkboxSelection||(e.preventDefault(),this.selectRow(e,t,n)),this.options.treeToggleDblClick&&this.hasTreeColumn&&this.$scope.$broadcast("rowDblClick",{row:n,index:t}),this.body.onRowDblClick({row:n})}},{key:"onCheckboxChange",value:function(e,t,n){if(this.checkRow(n),this.hasTreeColumn&&this.options.autoCheckSubNodes){var o=this.getCheckState(n);this.checkSubNodes(n,o)}}},{key:"getCheckState",value:function(e){if(!e||!this.checkedRows)return!1;var t=this.checkedRows.get(e);return t||(t=!1),t}},{key:"checkRow",value:function(e,t){if(e){var n=angular.isDefined(t)?t:!this.getCheckState(e);this.checkedRows.set(e,n),e._checked=n}}},{key:"checkSubNodes",value:function(e,t){var n=this;e&&e&&e.$$children&&e.$$children.forEach(function(e){var o=n.body.getRowInTree(e),i=o.row;n.checkRow(i,t),n.checkSubNodes(i,t)})}},{key:"isChecked",value:function(e){return this.getCheckState(e)}},{key:"selectRow",value:function(e,t,n){if(this.options.selectable)if(this.options.multiSelect){var o=e.shiftKey;if(o)this.selectRowsBetween(t,n);else{var i=this.selected.indexOf(n);i>-1?this.selected.splice(i,1):(this.options.multiSelectOnShift&&1===this.selected.length&&this.selected.splice(0,1),this.selected.push(n),this.body.onSelected([n]))}this.prevIndex=t}else this.selected=n,this.body.onSelected([n])}},{key:"selectRowsBetween",value:function(e){for(var t=e<this.prevIndex,n=[],o=0,i=this.body.rows.length;o<i;o+=1){var r=this.body.rows[o],l=o>=this.prevIndex&&o<=e,s=o<=this.prevIndex&&o>=e,a={};if(a=t?{start:e,
end:this.prevIndex-e}:{start:this.prevIndex,end:e+1},t&&s||!t&&l){var c=this.selected.indexOf(r);t&&c>-1?this.selected.splice(c,1):o>=a.start&&o<a.end&&-1===c&&(this.selected.push(r),n.push(r))}this.body.onSelected(n)}}}]),e}(),RowController=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getValue",value:function(e){return e.prop?DeepValueGetter(this.row,e.prop):""}},{key:"onTreeToggled",value:function(e){this.onTreeToggle({cell:e,row:this.row})}},{key:"stylesByGroup",value:function(e){var t={width:this.columnWidths[e]+"px"};if("left"===e)TranslateXY(t,this.options.internal.offsetX,0);else if("right"===e){var n=-1*(this.columnWidths.total-this.options.internal.innerWidth-this.options.internal.offsetX+this.options.internal.scrollBarWidth);TranslateXY(t,n,0)}return this.selected&&(t.backgroundColor=this.options.rowSelectionColor,t.color="#fff"),t}},{key:"onCheckboxChanged",value:function(e){this.onCheckboxChange({$event:e,row:this.row})}},{key:"getChanges",value:function(){if(!this.row._original)return null;var e={};for(var t in this.row._original)if(this.row._original.hasOwnProperty(t)){var n=this.row._original[t];n!==this.row[t]&&(e[t]=this.row[t])}return 0==Object.keys(e).length?null:e}},{key:"submitChanges",value:function(){if(this.row._original)for(var e in this.row._original)this.row._original.hasOwnProperty(e)&&(this.row._original[e]=this.row[e])}}]),e}(),GroupRowController=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"onGroupToggled",value:function(e){e.stopPropagation(),this.onGroupToggle({group:this.row})}},{key:"treeClass",value:function(){return{"dt-tree-toggle":!0,"icon-right":!this.expanded,"icon-down":this.expanded}}}]),e}(),CellController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){if(this.options.treeToggleDblClick&&this.column.isTreeColumn){var e=this;this.listener=this.$scope.$on("rowDblClick",function(t,n){n.index==e.row.$$index&&e.treeToggle()}),this.$scope.$on("$destroy",this.listener)}}},{key:"styles",value:function(){return{width:this.column.width+"px","min-width":this.column.width+"px"}}},{key:"cellClass",value:function(){var e={"dt-tree-col":this.column.isTreeColumn};return this.column.className&&(e[this.column.className]=!0),e}},{key:"treeClass",value:function(){return{"dt-tree-toggle":!0,"icon-right":!this.expanded,"icon-down":this.expanded,"icon-loading":this.loading}}},{key:"onTreeToggled",value:function(e){e.stopPropagation(),this.treeToggle()}},{key:"treeToggle",value:function(){this.expanded=!this.expanded,this.onTreeToggle({cell:{value:this.value,column:this.column,expanded:this.expanded}})}},{key:"onCheckboxChanged",value:function(e){e.stopPropagation(),this.onCheckboxChange({$event:e})}},{key:"getValue",value:function(){var e=this.column.cellDataGetter?this.column.cellDataGetter(this.value):this.value;return(angular.isUndefined(e)||null===e)&&(e=""),e}}]),e}(),FooterController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.page=this.paging.offset+1,this.$scope.$watch("footer.paging.offset",function(t){e.offsetChanged(t)})}},{key:"offsetChanged",value:function(e){this.page=e+1}},{key:"onPaged",value:function(e){this.paging.offset=e-1,this.onPage({offset:this.paging.offset,size:this.paging.size})}}]),e}(),PagerController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),isOldAngular()&&this.$onInit()}return e.$inject=["$scope"],_createClass(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.$scope.$watch("pager.count",function(){e.findAndSetPages()}),this.$scope.$watch("pager.size",function(){e.findAndSetPages()}),this.$scope.$watch("pager.page",function(t){0!==t&&t<=e.totalPages&&e.getPages(t)}),this.size&&this.count&&this.page&&this.findAndSetPages()}},{key:"findAndSetPages",value:function(){this.calcTotalPages(this.size,this.count),this.getPages(this.page||1)}},{key:"calcTotalPages",value:function(e,t){var n=e<1?1:Math.ceil(t/e);this.totalPages=Math.max(n||0,1)}},{key:"selectPage",value:function(e){e>0&&e<=this.totalPages&&(this.page=e,this.onPage({page:e}))}},{key:"prevPage",value:function(){this.canPrevious()&&this.selectPage(this.page-=1)}},{key:"nextPage",value:function(){this.canNext()&&this.selectPage(this.page+=1)}},{key:"canPrevious",value:function(){return this.page>1}},{key:"canNext",value:function(){return this.page<this.totalPages}},{key:"getPages",value:function(e){var t=[],n=5<this.totalPages,o=1,i=this.totalPages;n&&(o=5*(Math.ceil(e/5)-1)+1,i=Math.min(o+5-1,this.totalPages));for(var r=o;r<=i;r+=1)t.push({number:r,text:r,active:r===e});this.pages=t}}]),e}(),POSITION={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",MIDDLE:"middle"},popover=angular.module("dt.popover",[]).factory("PopoverRegistry",PopoverRegistry).factory("PositionHelper",PositionHelper).directive("popover",PopoverDirective),MenuController=function(){function e(t){_classCallCheck(this,e),this.$scope=t}return e.$inject=["$scope"],_createClass(e,[{key:"getColumnIndex",value:function(e){return this.$scope.current.findIndex(function(t){return e.name===t.name})}},{key:"isChecked",value:function(e){return this.getColumnIndex(e)>-1}},{key:"onCheck",value:function(e){var t=this.getColumnIndex(e);-1===t?this.$scope.current.push(e):this.$scope.current.splice(t,1)}}]),e}(),DropdownController=function(){function e(t){_classCallCheck(this,e),_extends(this,{$scope:t}),t.open=!1}return e.$inject=["$scope"],_createClass(e,[{key:"toggle",value:function(){this.$scope.open=!this.$scope.open}}]),e}(),dropdown=angular.module("dt.dropdown",[]).controller("DropdownController",DropdownController).directive("dropdown",DropdownDirective).directive("dropdownToggle",DropdownToggleDirective).directive("dropdownMenu",DropdownMenuDirective),menu=angular.module("dt.menu",[dropdown.name]).controller("MenuController",MenuController).directive("dtm",MenuDirective),dataTable=angular.module("data-table",[]).directive("dtable",DataTableDirective).directive("resizable",ResizableDirective).directive("sortable",SortableDirective).directive("draggableRow",DraggableRowDirective).directive("dtHeader",HeaderDirective).directive("dtHeaderCell",HeaderCellDirective).directive("dtBody",BodyDirective).directive("dtScroller",ScrollerDirective).directive("dtSelection",SelectionDirective).directive("dtRow",RowDirective).directive("dtGroupRow",GroupRowDirective).directive("dtCell",CellDirective).directive("dtFooter",FooterDirective).directive("dtPager",PagerDirective).directive("focusOn",FocusOnDirective);exports.dtPopover=popover,exports.dtMenu=menu,exports.default=dataTable;